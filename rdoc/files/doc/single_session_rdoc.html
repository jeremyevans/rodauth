<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
<head>
<title>single_session.rdoc</title>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
<link href='../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
<script type='text/javascript'>
  function popupCode(url) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }
  
  function toggleCode(id) {
    var code = document.getElementById(id)
  
    code.style.display = code.style.display != 'block' ? 'block' : 'none'
    return true
  }
  
  // Make codeblocks hidden by default
  document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
</script>
</head>
<body class='page'>
<div class='file' id='wrapper'>
<div class='header'>
<h1 class='name'>single_session.rdoc
</h1>
<div class='paths'>
doc/single_session.rdoc
</div>
<div class='last-update'>
Last Update:
<span class='datetime'>2020-04-08 15:16:21 -0700</span>
</div>
</div>
<div id='content'>
<div id='text'>
<div id='description'>
<h1 id="label-Documentation+for+Single+Session+Feature">Documentation for Single Session Feature<span><a href="#label-Documentation+for+Single+Session+Feature">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>The single session feature stores the key for the session in a database table whenever a user logs in to the system.  In your routing block, you can check that the session key given matches the stored key by doing:</p>

<pre class="ruby"><span class="ruby-identifier">rodauth</span>.<span class="ruby-identifier">check_single_session</span>
</pre>

<p>It is not recommended to use this feature unless you have a policy that requires it.  Many users find it useful to be able to have multiple concurrent sessions, and restricting this ability does not make things more secure.  You can use the <a href="active_sessions_rdoc.html">active_sessions</a> feature for something with similar behavior but that allows for concurrent sessions.</p>

<p>One of the side benefits with this feature is that logouts reset the single session key, so attempts to reuse the previous session after logout no longer work.</p>

<h2 id="label-Auth+Value+Methods">Auth Value Methods<span><a href="#label-Auth+Value+Methods">&para;</a> <a href="#top">&uarr;</a></span></h2>
<table class="rdoc-list note-list"><tbody><tr><td class='label'>allow_raw_single_session_key? </td><td>
<p>Whether to allow a raw single session key to be accepted, should only be enabled for graceful transition when <code>hmac_secret</code> is first set.</p>
</td></tr><tr><td class='label'>inactive_session_error_status </td><td>
<p>The error status to use when a JSON request is made and the session is no longer active, 401 by default.</p>
</td></tr><tr><td class='label'>single_session_error_flash </td><td>
<p>The flash error to display if the current session is no longer the active session for the account.</p>
</td></tr><tr><td class='label'>single_session_id_column </td><td>
<p>The column in the <code>single_session_table</code> containing the account id.</p>
</td></tr><tr><td class='label'>single_session_key_column </td><td>
<p>The column in the <code>single_session_table</code> containing the single session key.</p>
</td></tr><tr><td class='label'>single_session_redirect </td><td>
<p>Where to redirect if the current session is no longer the active session for the account.</p>
</td></tr><tr><td class='label'>single_session_session_key </td><td>
<p>The session key name to use for storing the single session key.</p>
</td></tr><tr><td class='label'>single_session_table </td><td>
<p>The database table storing single session keys.</p>
</td></tr></tbody></table>

<h2 id="label-Auth+Methods">Auth Methods<span><a href="#label-Auth+Methods">&para;</a> <a href="#top">&uarr;</a></span></h2>
<table class="rdoc-list note-list"><tbody><tr><td class='label'>currently_active_session? </td><td>
<p>Whether the current session is the active session for the user.</p>
</td></tr><tr><td class='label'>no_longer_active_session </td><td>
<p>The action to take if the current session is no longer the active session for the user.</p>
</td></tr><tr><td class='label'>reset_single_session_key </td><td>
<p>Reset the single session key for the user, by default to a new random key.</p>
</td></tr><tr><td class='label'>update_single_session_key </td><td>
<p>Update the single session key in the current session and in the database, reflecting that the current session is the active session for the user.</p>
</td></tr></tbody></table>
</div>
<div id='context'>
</div>

</div>
</div>

<div id='footer-push'></div>
</div>
<div id='footer'>
<a href="https://github.com/jeremyevans/hanna"><strong>Hanna</strong> RDoc template</a>
</div>
</body>
</html>
