<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
<head>
<title>1.5.0.txt</title>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
<link href='../../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
<script type='text/javascript'>
  function popupCode(url) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }
  
  function toggleCode(id) {
    var code = document.getElementById(id)
  
    code.style.display = code.style.display != 'block' ? 'block' : 'none'
    return true
  }
  
  // Make codeblocks hidden by default
  document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
</script>
</head>
<body class='page'>
<div class='file' id='wrapper'>
<div class='header'>
<h1 class='name'>1.5.0.txt
</h1>
<div class='paths'>
doc/release_notes/1.5.0.txt
</div>
</div>
<div id='content'>
<div id='text'>
<div id='description'>
<h1 id="label-jwt+Feature+Additions-2FImprovements+">jwt Feature Additions/Improvements <span><a href="#label-jwt+Feature+Additions-2FImprovements+">&para;</a> <a href="#top">&uarr;</a></span></h1>
<ul><li>
<p>JSON format responses now have the response content type set to application/json.</p>
</li><li>
<p>The jwt feature now does not break if HTTP Basic or Digest authentication is used.</p>
</li><li>
<p>If jwt_check_accept? is true, <a href="../../../classes/Rodauth.html"><code>Rodauth</code></a> will return a 406 error if a request Accept header is provided and it does not indicate that JSON is acceptable.</p>
</li><li>
<p>Many new configuration methods have been added:</p>
<ul><li>
<p>invalid_jwt_format_error_message: The error message to use when a JWT with an invalid format is submitted in the Authorization header.</p>
</li><li>
<p>json_accept_regexp: The regexp to use to check the Accept header for JSON if jwt_check_accept? is true.</p>
</li><li>
<p>json_not_accepted_error_message: The error message to display if jwt_check_accept? is true and the Accept header is present but does not match json_request_content_type_regexp.</p>
</li><li>
<p>json_request_content_type_regexp: The regexp to use to recognize a request as a json request.</p>
</li><li>
<p>json_response_content_type: The content type to set for json responses, application/json by default.</p>
</li><li>
<p>jwt_authorization_ignore: A regexp matched against the Authorization header, which skips JWT processing if it matches. By default, HTTP Basic and Digest authentication are ignored.</p>
</li><li>
<p>jwt_authorization_remove: A regexp to remove from the Authorization header before processing the JWT.  By default, a Bearer prefix is removed.</p>
</li><li>
<p>jwt_check_accept?: Whether to check the Accept header to see if the client supports JSON responses, false by default for backwards compatibility.</p>
</li><li>
<p>session_jwt: An encoded JWT for the current session.</p>
</li><li>
<p>use_jwt?: Whether to use the JWT in the Authorization header for authentication information.  If false, falls back to using the rack session. By default, the Authorization header is used if it is present, if only_json? is true, or if the request uses a json content type.</p>
</li></ul>
</li></ul>

<h1 id="label-jwt+Feature+Backwards+Compatibility+Issues">jwt Feature Backwards Compatibility Issues<span><a href="#label-jwt+Feature+Backwards+Compatibility+Issues">&para;</a> <a href="#top">&uarr;</a></span></h1>
<ul><li>
<p>The only_json? setting in the jwt feature is now only true by default if the :json=&gt;:only option was used when loading the rodauth plugin into the roda app.  Previously, it was always true, but it only was considered in requests to <a href="../../../classes/Rodauth.html"><code>Rodauth</code></a> endpoints.  It now also is considered in most <a href="../../../classes/Rodauth.html"><code>Rodauth</code></a> calls, and if true will use an empty session instead of falling back to the rack session if an Authorization header is not present.</p>
</li><li>
<p>Previously, the jwt feature only handled requests where the request content-type is JSON.  It now also handles non-JSON requests if the Authorization header is present or if only_json? is true.</p>
</li><li>
<p>If an invalid JWT format is used in the Authorization header, <a href="../../../classes/Rodauth.html"><code>Rodauth</code></a> now returns a 400 error, instead of raising an exception.</p>
</li></ul>

<h1 id="label-Other+Improvements">Other Improvements<span><a href="#label-Other+Improvements">&para;</a> <a href="#top">&uarr;</a></span></h1>
<ul><li>
<p>A template_opts configuration method has been added, for overriding the view/render options.  One possible use for this is to specify a non-default layout.</p>
</li></ul>
</div>
<div id='context'>
</div>

</div>
</div>

<div id='footer-push'></div>
</div>
<div id='footer'>
<a href="https://github.com/jeremyevans/hanna"><strong>Hanna</strong> RDoc template</a>
</div>
</body>
</html>
