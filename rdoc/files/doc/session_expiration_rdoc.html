<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
<head>
<title>session_expiration.rdoc</title>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
<link href='../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
<script type='text/javascript'>
  function popupCode(url) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }
  
  function toggleCode(id) {
    var code = document.getElementById(id)
  
    code.style.display = code.style.display != 'block' ? 'block' : 'none'
    return true
  }
  
  // Make codeblocks hidden by default
  document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
</script>
</head>
<body class='page'>
<div class='file' id='wrapper'>
<div class='header'>
<h1 class='name'>session_expiration.rdoc
</h1>
<div class='paths'>
doc/session_expiration.rdoc
</div>
</div>
<div id='content'>
<div id='text'>
<div id='description'>
<h1 id="label-Documentation+for+Session+Expiration+Feature">Documentation for Session Expiration Feature<span><a href="#label-Documentation+for+Session+Expiration+Feature">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>The session expiration feature allows setting an inactivity timeout and a max lifetime for sessions.  When this feature is used, you should use <code>rodauth.check_session_expiration</code> at the top (or other appropriate place) in your routing tree.</p>

<pre class="ruby"><span class="ruby-identifier">route</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">rodauth</span>.<span class="ruby-identifier">check_session_expiration</span>
  <span class="ruby-identifier">r</span>.<span class="ruby-identifier">rodauth</span>

  <span class="ruby-comment"># ...</span>
<span class="ruby-keyword">end</span>
</pre>

<p>When checking session expiration, if the last activity was more than the inactivity timeout, or the session was created more the maximum lifetime ago, the session is cleared, and the user is redirected to the login page.</p>

<h2 id="label-Auth+Value+Methods">Auth Value Methods<span><a href="#label-Auth+Value+Methods">&para;</a> <a href="#top">&uarr;</a></span></h2>
<table class="rdoc-list note-list"><tbody><tr><td class='label'>max_session_lifetime </td><td>
<p>The maximum number of seconds since session creation that sessions will be valid for, regardless of session activity. 86400 by default (1 day).</p>
</td></tr><tr><td class='label'>session_created_session_key </td><td>
<p>The session key storing the session creation timestamp.</p>
</td></tr><tr><td class='label'>session_expiration_default </td><td>
<p>Whether to expire sessions that donâ€™t have the created at or last activity at timestamps set, true by default.</p>
</td></tr><tr><td class='label'>session_expiration_error_flash </td><td>
<p>The flash error to show if a session expires.</p>
</td></tr><tr><td class='label'>session_expiration_error_status </td><td>
<p>The error status to use when a JSON request is made and the session has expired, 401 by default.</p>
</td></tr><tr><td class='label'>session_expiration_redirect </td><td>
<p>Where to redirect if a session expires.</p>
</td></tr><tr><td class='label'>session_inactivity_timeout </td><td>
<p>The maximum number of seconds allowed since the last activity before the session will be considered invalid.  1800 by default (30 minutes).</p>
</td></tr><tr><td class='label'>session_last_activity_session_key </td><td>
<p>The session key storing the last session activity timestamp.</p>
</td></tr></tbody></table>
</div>
<div id='context'>
</div>

</div>
</div>

<div id='footer-push'></div>
</div>
<div id='footer'>
<a href="https://github.com/jeremyevans/hanna"><strong>Hanna</strong> RDoc template</a>
</div>
</body>
</html>
